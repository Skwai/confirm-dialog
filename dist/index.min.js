/*!
  * confirm-dialog 
  * @version v1.0.0 
  * @author Cameron Jensen
  * @license MIT
  */
"use strict";var asyncToGenerator=function(e){return function(){var n=e.apply(this,arguments);return new Promise(function(e,t){function a(i,r){try{var s=n[i](r),o=s.value}catch(e){return void t(e)}if(!s.done)return Promise.resolve(o).then(function(e){a("next",e)},function(e){a("throw",e)});e(o)}return a("next")})}},classCallCheck=function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")},createClass=function(){function e(e,n){for(var t=0;t<n.length;t++){var a=n[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(n,t,a){return t&&e(n.prototype,t),a&&e(n,a),n}}(),DEFAULTS={cancelLabel:"Cancel",canCancel:!0,className:"ConfirmDialog",confirmLabel:"Confirm",message:null,onCancel:function(){},onConfirm:function(){},parent:document.body,title:"Please Confirm"},ESCAPE_KEYCODE=27,ConfirmDialog=function(){function e(n){if(classCallCheck(this,e),this.opts=Object.assign({},DEFAULTS,n),!(this.opts.parent instanceof Node))throw Error("`parent` is not a valid `Node`");Object.assign(this,{handleConfirm:this.handleConfirm.bind(this),handleCancel:this.handleCancel.bind(this),handleEscape:this.handleEscape.bind(this)}),this.render()}return createClass(e,[{key:"render",value:function(){this.element=document.createElement("div"),this.element.innerHTML=this.template(this.opts),document.body.appendChild(this.element),this.bindListeners()}},{key:"destroy",value:function(){this.unbindListeners(),this.element.parentNode.removeChild(this.element),delete this.element}},{key:"handleEscape",value:function(e){e.keyCode===ESCAPE_KEYCODE&&this.handleCancel(e)}},{key:"bindListeners",value:function(){var e=this,n=this.element;this.opts.canCancel&&(n.addEventListener("click",function(t){t.target.isSameNode(n)&&e.handleCancel()}),window.addEventListener("keyup",this.handleEscape))}},{key:"unbindListeners",value:function(){window.removeEventListener("keyup",this.handleEscape)}},{key:"handleCancel",value:function(){function e(e){return n.apply(this,arguments)}var n=asyncToGenerator(regeneratorRuntime.mark(function e(n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.onCancel(n);case 2:this.destroy();case 3:case"end":return e.stop()}},e,this)}));return e}()},{key:"handleConfirm",value:function(){function e(e){return n.apply(this,arguments)}var n=asyncToGenerator(regeneratorRuntime.mark(function e(n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.onConfirm(n);case 2:this.destroy();case 3:case"end":return e.stop()}},e,this)}));return e}()},{key:"template",value:function(e){var n=e.canCancel,t=e.cancelLabel,a=e.className,i=e.confirmLabel,r=e.message;return'\n      <div class="'+a+'__Content">\n        <header class="'+a+'__Header">\n          <h4 class="'+a+'__Title">'+e.title+"</h4>\n        </header>\n        "+(r?'<div class="'+a+'__Message">'+r+"</div>":"")+'\n        <div class="'+a+'__Actions">\n          '+(i?'<button class="'+a+'__Confirm">'+i+"</button>":"")+"\n          "+(n?'<button class="'+a+'__Cancel">'+t+"</button>":"")+"\n        </div>\n      </div>\n    "}}]),e}();module.exports=ConfirmDialog;
