/*!
  * confirm-dialog
  * @version v1.0.0
  * @author Cameron Jensen
  * @license MIT
  */
!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):e.ConfirmDialog=n()}(this,function(){"use strict";var e=function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")},n=function(){function e(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(n,t,i){return t&&e(n.prototype,t),i&&e(n,i),n}}(),t={cancelLabel:"Cancel",canCancel:!0,className:"ConfirmDialog",confirmLabel:"Confirm",message:null,onCancel:function(){},onConfirm:function(){},parent:document.body,title:"Please Confirm"};return function(){function i(n){if(e(this,i),this.opts=Object.assign({},t,n),this.cancelled=!1,this.destroyed=!1,this.loading=!1,!(this.opts.parent instanceof Node))throw Error("`parent` is not a valid `HTMLElement`");Object.assign(this,{handleConfirm:this.handleConfirm.bind(this),handleCancel:this.handleCancel.bind(this),handleEscape:this.handleEscape.bind(this)}),this.render()}return n(i,[{key:"render",value:function(){if(this.element)throw Error("Cannot render, `this.element` already exists");this.element=document.createElement("div"),this.element.classList.add(this.opts.className),this.element.innerHTML=this.template(this.opts),this.confirmButton=this.getConfirmButton(),this.cancelButton=this.getCancelButton(),this.opts.parent.appendChild(this.element),this.bindListeners()}},{key:"destroy",value:function(){return this.unbindListeners(),this.element instanceof Node&&!this.destroyed&&(this.element.parentNode.removeChild(this.element),delete this.element,this.destroyed=!0),this.destroyed}},{key:"handleEscape",value:function(e){27===e.keyCode&&this.handleCancel(e)}},{key:"getConfirmButton",value:function(){return this.confirmButton=this.confirmButton||this.element.querySelector("."+this.opts.className+"__Confirm"),this.confirmButton}},{key:"getCancelButton",value:function(){return this.cancelButton=this.cancelButton||this.element.querySelector("."+this.opts.className+"__Cancel"),this.cancelButton}},{key:"bindListeners",value:function(){var e=this,n=this.element;this.cancelButton,this.confirmButton;this.getConfirmButton().addEventListener("click",this.handleConfirm),this.opts.canCancel&&(n.addEventListener("click",function(t){return t.target.isSameNode(n)?e.handleCancel():t}),window.addEventListener("keyup",this.handleEscape),this.getCancelButton().addEventListener("click",this.handleCancel))}},{key:"unbindListeners",value:function(){window.removeEventListener("keyup",this.handleEscape)}},{key:"confirm",value:function(){return this.handleConfirm()}},{key:"cancel",value:function(){return this.handleCancel()}},{key:"handleCancel",value:function(e){var n=this;return Promise.resolve().then(function(){if(n.opts.canCancel&&!n.loading)return Promise.resolve().then(function(){return n.loading=!0,n.opts.onCancel(e)}).then(function(){return n.loading=!1,n.destroy(),!0})}).then(function(){})}},{key:"handleConfirm",value:function(e){var n=this;return Promise.resolve().then(function(){return!n.loading&&Promise.resolve().then(function(){return n.loading=!0,n.opts.onConfirm(e)}).then(function(){return n.loading=!1,n.destroy(),!0})}).then(function(){})}},{key:"template",value:function(e){var n=e.canCancel,t=e.cancelLabel,i=e.className,o=e.confirmLabel,s=e.message;return'\n      <div\n        class="'+i+'__Content"\n        role="alertdialog"\n        aria-hidden="false"\n        aria-labelledby=""\n        aria-describedby=""\n      >\n        <header class="'+i+'__Header">\n          <h4 class="'+i+'__Title">'+e.title+"</h4>\n        </header>\n        "+(s?'<div class="'+i+'__Message">'+s+"</div>":"")+'\n        <footer class="'+i+'__Actions">\n          '+(o?'<button type="button" class="'+i+'__Confirm">'+o+"</button>":"")+"\n          "+(n?'<button type="button" class="'+i+'__Cancel">'+t+"</button>":"")+"\n        </footer>\n      </div>\n    "}}]),i}()});
//# sourceMappingURL=index.min.js.map
